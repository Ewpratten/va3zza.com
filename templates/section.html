{% extends "base.html" %}
{% block title %}{{section.title}} | {{config.title}}{% endblock title %}

{% block head %}
{{ super() }}

{# We are using some custom styles, so they must be loaded here #}
<link rel="stylesheet" href="/styles/by-section/section.css">
{% endblock head %}


{% block content %}

<div class="page-header">
    <h1>{{section.title}}</h1>
    {% if section.description %}
    <h2>{{section.description | safe}}</h2>
    {% endif %}
</div>

<div class="padded-content ">
    {{section.content | safe}}

    {% if section.extra.inject_blog_posts %}
    <ul style="margin:0">
        <div>
            {# Posts shall be broken down by year #}
            {% set title_year = "3000" %}
            {% for page in section.pages %}
            {% if not page.extra.hidden %}
            {% set page_year = page.date | date(format="%Y")%}
            {% if page_year != title_year %}
            {% set_global title_year = page_year %}
    </ul>
    <h2>{{title_year}}</h2>
    <ul>
        {% endif %}

        <li class="blog-post-li"><span style="color:{% if page.draft %}red{% else %}gray{% endif %};">{{page.date}}:</span> <a
                href="{{page.path}}">{{page.title}}</a>
        </li>
        {% endif %}
        {% endfor %}
    </ul>
    {% endif %}
</div>

{% endblock content %}